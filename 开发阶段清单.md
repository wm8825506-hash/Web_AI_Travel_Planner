# AI 旅行规划师 (AI Travel Planner) 开发阶段清单

## 阶段 0：环境与项目初始化

**目标**：保证项目可以本地运行，前后端联通。

- 配置 PyCharm Web 项目环境（FastAPI + 前端框架，如 React/Vue/Next.js）
- 创建基础目录结构：
  - `backend/`：FastAPI 服务，路由、模型、数据库操作
  - `frontend/`：Web 前端页面
  - `shared/`：共用配置，如 API key、常量
- 配置 `.env` 或安全存储服务的 API key（语音识别、地图、LLM）
- 当前目录结构：
  D:\graduate\AI_Travel_Planner
  ├── app/                                # 后端主应用目录
  │   ├── models/                         # 数据模型
  │   │   ├── user.py                     # 用户模型
  │   │   ├── plan.py                     # 行程模型 (计划中)
  │   │   └── budget.py                  # 预算模型 (计划中)
  │   ├── routers/                        # 路由处理
  │   │   ├── auth.py                     # 认证路由 (注册/登录)
  │   │   ├── plan.py                     # 行程路由 (计划中)
  │   │   ├── map.py                      # 地图路由 (计划中)
  │   │   ├── voice.py                    # 语音路由 (计划中)
  │   │   └── home.py                     # 主页路由
  │   ├── schemas/                        # 数据模式定义
  │   │   ├── user.py                     # 用户数据模式
  │   │   ├── plan.py                     # 行程数据模式 (计划中)
  │   │   └── budget.py                   # 预算数据模式 (计划中)
  │   ├── services/                       # 业务逻辑服务
  │   │   ├── ai_planner.py               # AI 行程规划服务 (计划中)
  │   │   ├── budget_manager.py           # 预算管理服务 (计划中)
  │   │   ├── map_service.py              # 地图服务 (计划中)
  │   │   └── speech_recognizer.py        # 语音识别服务 (计划中)
  │   ├── config.py                       # 配置文件
  │   ├── db.py                           # 数据库配置
  │   ├── dependencies.py                 # 依赖项
  │   └── main.py                         # 应用入口文件
  ├── ai-travel-planner-frontend/         # 前端应用目录
  │   ├── src/
  │   │   ├── components/                 # 组件目录
  │   │   │   ├── AuthForm.jsx            # 认证表单组件
  │   │   │   └── PlanForm.jsx            # 行程规划表单组件
  │   │   ├── pages/                      # 页面目录
  │   │   │   └── Home.js                 # 主页
  │   │   ├── api.js                      # API 接口
  │   │   ├── App.js                      # 主应用组件
  │   │   └── ...
  │   └── ...
  ├── uploads/                            # 上传文件目录 (当前为空)
  ├── .gitignore                          # Git 忽略文件配置
  ├── ai_travel_planner.db                # SQLite 数据库文件
  ├── 开发阶段清单.md                      # 开发阶段清单文档
  ├── pyvenv.cfg                          # Python 虚拟环境配置
  └── requirements.txt                    # 项目依赖列表
- 后端加载： python -m uvicorn app.main:app --reload    
- 前端： npm start

---

## 阶段 1：用户管理与认证

**目标**：实现注册、登录和会话管理，为行程数据存储打基础。

- 集成 Supabase 
  - 注册、登录、登出
  - 会话保持
- 创建用户信息表：
  - 用户 ID、昵称、偏好设置、旅行记录索引
- 测试前端注册登录流程

---

## 阶段 2：语音与文字输入接口

**目标**：用户能通过语音或文字提交旅行需求。

- 前端：
  - 语音录制按钮 + 文本框输入
  - 将音频上传到后端处理
- 后端：
  - 集成科大讯飞API
  - 返回文本结果给前端
- 测试：
  - 语音能正确转文字
  - 支持多轮输入

---

## 阶段 3：AI 行程生成核心

**目标**：将用户输入转化为旅行规划。

- 后端：
  
  - 创建行程生成 API
  
  - 调用阿里云平台的通义千问 LLM API生成：
    
    - 景点路线
    - 交通安排
    - 住宿推荐
    - 餐厅/娱乐推荐
  
  - 输出 JSON 结构：
    
    ```json
    {
      "day_1": [{"type": "景点", "name": "东京塔", "time": "9:00-11:00", "note": "门票500日元"}],
      "budget": {"total": 10000, "transport": 2000}
    }
    ```

- 前端：
  
  - 列表展示每天行程
  - 地图标注景点位置

---

## 阶段 4：地图导航与交互

**目标**：增强可视化体验。

- 集成高德地图 JS API
  - 景点打点
  - 路线规划
- 点击景点查看详情
- 简单路线优化（按时间或距离排序）
- 测试：
  - 地图正确展示行程路线
  - 与行程列表联动

---

## 阶段 5：费用预算与管理

**目标**：AI 生成预算，并支持记录实际支出。

- AI 预算生成：
  - 交通、住宿、餐饮、门票等
  - 可选不同预算方案（经济 / 普通 / 豪华）
- 前端：
  - 支持用户录入实际花费（语音/文字）
  - 显示预算 vs 实际对比
- 后端：
  - 将记录存入数据库
  - 生成旅行总花费报告

---

## 阶段 6：云端行程同步与多设备支持

**目标**：确保数据跨设备可用。

- 行程存储在 Supabase / Firestore
- 前端：
  - “我的行程”列表
  - 点击行程查看详情
- 自动同步：
  - 新增/修改行程时实时更新
- 测试：
  - 不同设备登录同一账号，数据一致

---

## 阶段 7：UI/UX 优化与可视化增强

**目标**：让 MVP 看起来更专业。

- 行程列表 + 地图结合
- 美观图片和卡片展示景点
- 语音操作优化：
  - 实时语音识别
  - 用户输入纠错
- 增加下载或分享行程功能（PDF/链接）

---

## 阶段 8：可选高级功能（迭代优化）

- AI 智能推荐餐厅、景点排序优化
- 行程冲突提示（时间/地点冲突）
- 预算智能调整（如自动计算不同花费方案）
- 多人协作行程（共享、评论）
- 离线行程缓存 + 导航

---

## 快速开发建议

- **MVP 优先**：阶段 0~5 先上线内部可用版本
- **API Key 管理**：先用测试账号，避免频繁收费
- **模块化开发**：每个功能独立测试再集成
- **前端先用简单组件**：后续再美化
- **语音功能**优先实现基础版本，再加多轮对话优化
